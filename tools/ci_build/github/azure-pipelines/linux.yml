

parameters:
  doskipp: 'true'

jobs: 
- job: Linux 
  pool:
    name: Linux-CPU
  timeoutInMinutes: 90

  variables:
    doskipv: 'true'

  steps:

  - ${{ if eq(parameters['doskipp'], 'true') }}:
    - task: BatchScript@1
      displayName: 'Setup VS2017 env vars'
      inputs:
        filename: 'C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvarsall.bat'
        arguments: '${{parameters.buildArch}} -vcvars_ver=14.11'
        modifyEnvironment: true
      condition: ${{parameters.setVcvars}}

    - script: |
       ls
       echo -----
       ls
      displayName: 'step1'

  - script: |
     ls
     echo -----
     ls
    displayName: 'step2'
    condition: ne (variables['doskipv'], 'true')

  - script: |
     ls
     echo -----
     ls
    displayName: 'Step3'
    condition: always()
